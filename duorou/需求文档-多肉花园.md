# 多肉花园小程序 - 详细需求文档

## 一、项目概述

### 1.1 项目定位
多肉花园是一个专注于多肉植物知识分享的小程序，通过静态JSON数据（GitHub Pages）提供多肉植物信息，结合微信公众号文章实现内容生态闭环。

### 1.2 核心特点
- **无远程API依赖**：所有数据通过GitHub Pages静态JSON提供
- **内容生态闭环**：小程序展示 + 公众号文章详情
- **广告收益**：通过微信广告组件实现变现
- **用户体验优先**：流畅的交互、精美的UI、个性化设置

### 1.3 目标用户
- 多肉植物爱好者
- 新手种植者
- 植物收藏家
- 园艺学习者

---

## 二、功能需求

### 2.1 核心功能模块

#### 2.1.1 首页（index）
**功能描述：**
- 轮播图展示（支持配置banner）
- 多肉植物列表展示（瀑布流/网格布局）
- 搜索入口
- 分类快捷入口
- 下拉刷新、上拉加载更多

**交互要求：**
- 骨架屏加载动画
- 图片懒加载
- 收藏状态实时更新
- 点击植物卡片进入详情页

#### 2.1.2 分类页（category）
**功能描述：**
- 分类列表展示（按数量排序）
- 分类图标/emoji展示
- 点击分类进入该分类下的植物列表

**分类体系：**
- 景天科
- 番杏科
- 仙人掌科
- 百合科
- 龙舌兰科
- 大戟科
- 萝藦科
- 菊科
- 马齿苋科
- 其他

#### 2.1.3 植物详情页（plant-detail）
**功能描述：**
- 植物高清大图展示（支持预览）
- 植物基本信息（名称、分类、ID）
- 收藏/取消收藏功能
- 相关文章列表（支持多个文章）
- 分享功能（分享给好友、分享到朋友圈）

**文章类型分类：**
- 种植方法
- 生活习性
- 病虫害防治
- 繁殖技巧
- 养护要点
- 品种介绍
- 其他

#### 2.1.4 植物列表页（plant-list）
**功能描述：**
- 按分类展示植物列表
- 单个植物详情模式（显示该植物的所有文章）
- 网格/列表布局切换
- 分页加载

#### 2.1.5 文章详情页（webview）
**功能描述：**
- 通过webview打开公众号文章
- 支持文章标题显示
- 加载状态提示
- 错误处理

#### 2.1.6 收藏页（collection）
**功能描述：**
- 收藏的植物列表
- 支持取消收藏
- 空状态提示
- 点击进入详情页

#### 2.1.7 搜索结果页（search-result）
**功能描述：**
- 关键词搜索
- 搜索结果展示
- 高亮关键词
- 空结果提示

#### 2.1.8 设置页（settings）
**功能描述：**
- 主题切换（绿色、蓝色、粉色、紫色、深色）
- 字体大小调整（小、中、大）
- 清除缓存
- 关于我们
- 用户反馈入口

---

## 三、数据结构设计

### 3.1 JSON数据格式（image-links.json）

```json
{
  "version": "1.0.0",
  "updateTime": "2024-01-01T00:00:00Z",
  "banner": [
    {
      "id": 1,
      "image": "https://example.com/banner1.jpg",
      "title": "多肉花园",
      "link": "/pages/category/category?category=景天科"
    },
    {
      "id": 2,
      "image": "https://example.com/banner2.jpg",
      "title": "发现多肉之美",
      "link": "/pages/index/index"
    }
  ],
  "plants": [
    {
      "id": "plant_001",
      "title": "景天科多肉植物",
      "category": "景天科",
      "src": "https://example.com/plant1.jpg",
      "description": "植物简介（可选）",
      "tags": ["易养", "耐旱", "新手推荐"],
      "articles": [
        {
          "id": "article_001",
          "title": "如何种植景天科多肉",
          "type": "种植方法",
          "url": "https://mp.weixin.qq.com/s/xxxxx",
          "cover": "https://example.com/article1.jpg",
          "publishTime": "2024-01-01",
          "readCount": 1000
        },
        {
          "id": "article_002",
          "title": "景天科多肉的生活习性",
          "type": "生活习性",
          "url": "https://mp.weixin.qq.com/s/yyyyy",
          "cover": "https://example.com/article2.jpg",
          "publishTime": "2024-01-02",
          "readCount": 800
        },
        {
          "id": "article_003",
          "title": "景天科多肉常见病虫害防治",
          "type": "病虫害防治",
          "url": "https://mp.weixin.qq.com/s/zzzzz",
          "cover": "https://example.com/article3.jpg",
          "publishTime": "2024-01-03",
          "readCount": 600
        }
      ],
      "metadata": {
        "difficulty": "简单",
        "waterFrequency": "每周1次",
        "lightRequirement": "充足阳光",
        "temperature": "15-25°C"
      }
    }
  ]
}
```

### 3.2 数据结构说明

#### 3.2.1 根对象
- `version`: 数据版本号，用于缓存更新判断
- `updateTime`: 数据更新时间（ISO 8601格式）
- `banner`: 轮播图数组（可选）
- `plants`: 植物数组

#### 3.2.2 植物对象（plant）
- `id`: 唯一标识符（必填）
- `title`: 植物名称（必填）
- `category`: 分类名称（必填）
- `src`: 植物图片URL（必填）
- `description`: 植物简介（可选）
- `tags`: 标签数组（可选）
- `articles`: 文章数组（必填，至少一个）
- `metadata`: 元数据（可选）

#### 3.2.3 文章对象（article）
- `id`: 文章唯一标识（必填）
- `title`: 文章标题（必填）
- `type`: 文章类型（必填）：种植方法、生活习性、病虫害防治、繁殖技巧、养护要点、品种介绍、其他
- `url`: 公众号文章URL（必填）
- `cover`: 文章封面图（可选）
- `publishTime`: 发布时间（可选）
- `readCount`: 阅读量（可选）

#### 3.2.4 元数据对象（metadata）
- `difficulty`: 种植难度（简单/中等/困难）
- `waterFrequency`: 浇水频率
- `lightRequirement`: 光照需求
- `temperature`: 适宜温度

---

## 四、页面功能详细设计

### 4.1 首页优化

#### 4.1.1 轮播图区域
- 支持3-5张轮播图
- 自动轮播（3秒间隔）
- 指示器显示
- 点击跳转到对应页面
- 支持配置banner或使用默认banner

#### 4.1.2 搜索功能
- 搜索框固定在顶部
- 支持实时搜索建议（可选）
- 点击搜索框跳转到搜索结果页
- 显示热门搜索词（可选）

#### 4.1.3 植物列表
- 网格布局（2列）
- 图片懒加载
- 植物名称、分类显示
- 收藏按钮（心形图标）
- 点击卡片进入详情页

#### 4.1.4 性能优化
- 骨架屏加载
- 图片缓存策略
- 分页加载（每页20条）
- 下拉刷新
- 上拉加载更多

### 4.2 植物详情页优化

#### 4.2.1 图片展示
- 高清大图展示
- 支持点击预览（全屏）
- 图片加载占位符
- 图片错误处理

#### 4.2.2 文章列表优化
- 按文章类型分组显示
- 文章类型标签（不同颜色）
- 显示文章封面图（如果有）
- 显示发布时间和阅读量
- 点击文章进入webview

#### 4.2.3 文章类型分组
```
📖 种植方法
🌱 生活习性
🐛 病虫害防治
🌿 繁殖技巧
💧 养护要点
📚 品种介绍
📝 其他
```

#### 4.2.4 交互优化
- 收藏按钮动画效果
- 分享按钮（分享给好友、分享到朋友圈）
- 返回顶部按钮（长列表时）
- 相关推荐（同分类的其他植物）

### 4.3 文章详情页（webview）优化

#### 4.3.1 加载状态
- 显示加载进度
- 加载失败提示
- 重试按钮

#### 4.3.2 用户体验
- 导航栏显示文章标题
- 支持返回上一页
- 页面加载超时处理

### 4.4 分类页优化

#### 4.4.1 分类展示
- 网格布局（2列或3列）
- 分类图标/emoji
- 分类名称
- 植物数量显示
- 点击进入分类列表

#### 4.4.2 分类排序
- 按植物数量降序排列
- 热门分类置顶

### 4.5 收藏页优化

#### 4.5.1 列表展示
- 与首页相同的网格布局
- 支持取消收藏
- 空状态提示（引导用户去首页浏览）

#### 4.5.2 功能增强
- 收藏时间显示（可选）
- 收藏分类筛选（可选）

---

## 五、广告收益方案

### 5.1 微信广告组件集成

#### 5.1.1 广告位置规划

**首页广告：**
- Banner广告（轮播图下方）
- 信息流广告（植物列表中，每10条插入1条）

**详情页广告：**
- Banner广告（文章列表上方）
- 激励式视频广告（查看完整文章前，可选）

**分类页广告：**
- Banner广告（分类列表上方）

**搜索结果页广告：**
- 信息流广告（搜索结果中）

#### 5.1.2 广告类型选择

**Banner广告：**
- 位置：页面顶部或中部
- 尺寸：750x200rpx（推荐）
- 展示频率：每个页面1-2个

**信息流广告：**
- 位置：列表内容中
- 展示频率：每10条内容插入1条
- 样式：与内容样式一致

**激励式视频广告：**
- 位置：查看文章前（可选）
- 奖励：跳过广告直接查看文章
- 用户选择：不强制观看

#### 5.1.3 广告收益优化

**用户体验平衡：**
- 广告数量适中，不影响用户体验
- 广告位置合理，不遮挡主要内容
- 提供关闭广告选项（部分广告类型）

**收益最大化：**
- 合理设置广告展示频率
- 优化广告位置和样式
- 分析用户行为，调整广告策略

### 5.2 广告实现方案

#### 5.2.1 组件引入
```json
{
  "usingComponents": {
    "ad-banner": "ad-unit",
    "ad-list": "ad-unit"
  }
}
```

#### 5.2.2 广告配置
- 在微信公众平台配置广告位
- 获取广告位ID
- 在代码中集成广告组件

---

## 六、用户体验优化

### 6.1 视觉设计

#### 6.1.1 主题系统
- **绿色主题**：默认主题，清新自然
- **蓝色主题**：清爽舒适
- **粉色主题**：温馨可爱
- **紫色主题**：优雅神秘
- **深色主题**：护眼模式

#### 6.1.2 字体大小
- 小号：24rpx（适合年轻用户）
- 中号：28rpx（默认，适合大多数用户）
- 大号：32rpx（适合中老年用户）

#### 6.1.3 动画效果
- 页面切换动画
- 加载动画（骨架屏）
- 收藏按钮动画
- 图片加载动画

### 6.2 交互优化

#### 6.2.1 加载体验
- 骨架屏（Skeleton Screen）
- 图片占位符
- 加载失败重试
- 离线缓存支持

#### 6.2.2 反馈机制
- 操作成功提示（Toast）
- 操作失败提示
- 网络错误提示
- 空状态提示

#### 6.2.3 性能优化
- 图片懒加载
- 数据缓存策略
- 分页加载
- 代码分包加载（可选）

### 6.3 个性化设置

#### 6.3.1 主题切换
- 实时切换，无需重启
- 设置持久化存储
- 所有页面同步更新

#### 6.3.2 字体大小
- 实时调整
- 设置持久化存储
- 所有页面同步更新

#### 6.3.3 其他设置
- 清除缓存
- 关于我们
- 用户反馈

---

## 七、技术实现方案

### 7.1 数据获取策略

#### 7.1.1 数据源
- GitHub Pages静态JSON文件
- URL: `https://dai1254473705.github.io/flower/data/image-links.json`

#### 7.1.2 缓存策略
- 首次加载：从网络获取，存入本地缓存
- 后续加载：优先使用缓存，后台更新
- 缓存更新：通过version字段判断是否需要更新
- 离线支持：网络失败时使用缓存数据

#### 7.1.3 数据更新机制
```javascript
// 伪代码
function checkDataUpdate() {
  const cachedVersion = getStorageSync('dataVersion')
  const cachedData = getStorageSync('plantsData')
  
  // 请求最新数据
  requestLatestData().then(newData => {
    if (newData.version !== cachedVersion) {
      // 更新缓存
      setStorageSync('plantsData', newData)
      setStorageSync('dataVersion', newData.version)
      // 通知用户更新
      showUpdateTip()
    }
  })
}
```

### 7.2 图片处理

#### 7.2.1 图片优化
- 使用CDN加速（GitHub Pages）
- 图片懒加载
- 图片压缩（服务端）
- 支持WebP格式（可选）

#### 7.2.2 图片缓存
- 微信小程序自动缓存
- 设置合理的缓存策略
- 图片加载失败处理

### 7.3 错误处理

#### 7.3.1 网络错误
- 网络请求失败提示
- 自动使用缓存数据
- 重试机制

#### 7.3.2 数据错误
- JSON解析错误处理
- 数据格式验证
- 默认数据兜底

#### 7.3.3 页面错误
- 页面加载失败处理
- Webview加载失败处理
- 用户友好的错误提示

### 7.4 性能优化

#### 7.4.1 代码优化
- 减少不必要的setData
- 使用组件化开发
- 代码分包（超过2MB时）

#### 7.4.2 数据优化
- 分页加载
- 虚拟列表（大量数据时）
- 数据预加载

#### 7.4.3 渲染优化
- 使用骨架屏
- 图片懒加载
- 减少DOM节点

---

## 八、数据维护方案

### 8.1 JSON数据更新流程

#### 8.1.1 数据准备
1. 在本地编辑`image-links.json`
2. 更新`version`字段
3. 更新`updateTime`字段
4. 添加新的植物数据或文章

#### 8.1.2 数据发布
1. 提交到GitHub仓库
2. GitHub Pages自动更新
3. 小程序自动获取最新数据

#### 8.1.3 数据格式验证
- 使用JSON Schema验证（可选）
- 确保必填字段存在
- 确保URL格式正确

### 8.2 文章管理

#### 8.2.1 公众号文章发布
1. 在公众号发布文章
2. 获取文章链接
3. 更新JSON中的articles数组

#### 8.2.2 文章分类
- 按照文章类型分类
- 同一植物可以有多个不同类型的文章
- 文章按发布时间排序

### 8.3 数据备份

#### 8.3.1 版本控制
- 使用Git进行版本管理
- 每次更新创建commit
- 重要更新打tag

#### 8.3.2 数据备份
- GitHub自动备份
- 定期导出JSON文件
- 保留历史版本

---

## 九、运营策略

### 9.1 内容运营

#### 9.1.1 文章规划
- 定期发布高质量文章
- 覆盖所有文章类型
- 针对热门植物重点推广

#### 9.1.2 植物数据完善
- 逐步增加植物品种
- 完善植物信息（描述、标签、元数据）
- 添加高质量图片

### 9.2 用户运营

#### 9.2.1 用户反馈
- 设置反馈入口
- 收集用户建议
- 及时响应问题

#### 9.2.2 分享功能
- 优化分享文案
- 分享卡片设计
- 引导用户分享

### 9.3 数据分析

#### 9.3.1 数据统计
- 使用微信小程序数据分析
- 统计用户行为
- 分析热门内容

#### 9.3.2 优化方向
- 根据数据优化内容
- 调整广告策略
- 改进用户体验

---

## 十、开发计划

### 10.1 第一阶段：基础功能完善
- [ ] 优化现有页面功能
- [ ] 完善数据结构
- [ ] 实现文章类型分组
- [ ] 优化用户体验

### 10.2 第二阶段：广告集成
- [ ] 申请微信广告
- [ ] 集成广告组件
- [ ] 测试广告展示
- [ ] 优化广告位置

### 10.3 第三阶段：功能增强
- [ ] 添加搜索建议
- [ ] 实现相关推荐
- [ ] 优化性能
- [ ] 添加数据分析

### 10.4 第四阶段：运营优化
- [ ] 完善植物数据
- [ ] 发布高质量文章
- [ ] 收集用户反馈
- [ ] 持续优化迭代

---

## 十一、注意事项

### 11.1 合规要求
- 遵守微信小程序规范
- 确保内容健康合法
- 广告内容合规

### 11.2 技术限制
- 小程序包大小限制（主包2MB，总包20MB）
- 网络请求域名需配置
- Webview域名需配置

### 11.3 用户体验
- 避免过度广告
- 保持页面流畅
- 提供离线支持

---

## 十二、总结

多肉花园小程序通过静态JSON数据实现无API依赖的内容展示，结合微信公众号文章形成内容生态闭环。通过合理的广告布局实现收益，同时保证良好的用户体验。通过持续的内容更新和功能优化，打造一个专业、易用的多肉植物知识平台。

---

**文档版本：** v1.0  
**最后更新：** 2024-01-01  
**维护者：** 开发团队


