<!--pages/plant-detail/plant-detail.wxml-->
<view class="container {{currentTheme}}" style="font-size: {{fontSizeValue}}rpx;">
  <view wx:if="{{plant}}">
    <!-- æ¤ç‰©å¤§å›¾ -->
    <view class="plant-image-section">
      <image 
        class="plant-image" 
        src="{{plant.src}}" 
        mode="aspectFill"
        bindtap="previewImage"
      ></image>
      <view class="image-gradient">
        <view class="image-info">
          <text class="plant-title">{{plant.title}}</text>
          <view class="category-tag">
            <text class="category-text">{{plant.category || 'æœªåˆ†ç±»'}}</text>
          </view>
        </view>
      </view>
      
      <!-- æ”¶è—æŒ‰é’® -->
      <view class="collection-btn" catchtap="toggleCollection">
        <text class="collection-icon {{isCollected ? 'collected' : ''}}">{{isCollected ? 'â™¥' : 'â™¡'}}</text>
        <text class="collection-text">{{isCollected ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </view>
    </view>

    <!-- æ¤ç‰©ä»‹ç» -->
    <view class="info-section" wx:if="{{plant.introduction}}">
      <view class="section-header">
        <text class="section-title">æ¤ç‰©ä»‹ç»</text>
      </view>
      <view class="section-content">
        <text class="intro-text">{{plant.introduction}}</text>
      </view>
    </view>

    <!-- å½¢æ€ç‰¹å¾ -->
    <view class="info-section" wx:if="{{plant.morphology && plant.morphology.length > 0}}">
      <view class="section-header">
        <text class="section-title">å½¢æ€ç‰¹å¾</text>
      </view>
      <view class="section-content">
        <view class="feature-list">
          <view class="feature-item" wx:for="{{plant.morphology}}" wx:key="index">
            <text class="feature-bullet">â€¢</text>
            <text class="feature-text">{{item}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- å…»æŠ¤è¦ç‚¹ -->
    <view class="info-section" wx:if="{{plant.carePoints && plant.carePoints.length > 0}}">
      <view class="section-header">
        <text class="section-title">å…»æŠ¤è¦ç‚¹</text>
      </view>
      <view class="section-content">
        <view class="care-list">
          <view class="care-item" wx:for="{{plant.carePoints}}" wx:key="index">
            <text class="care-bullet">â€¢</text>
            <text class="care-text">{{item}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- å…»æŠ¤ä¿¡æ¯ç½‘æ ¼ -->
    <view class="info-section" wx:if="{{plant.careInfo}}">
      <view class="care-info-grid">
        <view class="care-info-item" wx:if="{{plant.careInfo.wateringFrequency}}">
          <view class="care-info-label">æµ‡æ°´é¢‘ç‡</view>
          <view class="care-info-value">{{plant.careInfo.wateringFrequency}}</view>
        </view>
        <view class="care-info-item" wx:if="{{plant.careInfo.lightRequirement}}">
          <view class="care-info-label">å…‰ç…§éœ€æ±‚</view>
          <view class="care-info-value">{{plant.careInfo.lightRequirement}}</view>
        </view>
        <view class="care-info-item" wx:if="{{plant.careInfo.suitableTemperature}}">
          <view class="care-info-label">é€‚å®œæ¸©åº¦</view>
          <view class="care-info-value">{{plant.careInfo.suitableTemperature}}</view>
        </view>
        <view class="care-info-item" wx:if="{{plant.careInfo.soilRequirement}}">
          <view class="care-info-label">åœŸå£¤è¦æ±‚</view>
          <view class="care-info-value">{{plant.careInfo.soilRequirement}}</view>
        </view>
      </view>
    </view>

    <!-- æ–‡ç« åˆ—è¡¨ -->
    <scroll-view class="articles-section" scroll-y>
      <!-- æŒ‰ç±»å‹åˆ†ç»„æ˜¾ç¤º -->
      <view class="article-groups" wx:if="{{articleGroups && articleGroups.length > 0}}">
        <block wx:for="{{articleGroups}}" wx:key="type" wx:for-item="group">
          <view class="article-group">
            <view class="group-header">
              <text class="group-icon">{{group.icon}}</text>
              <text class="group-title">{{group.type}}</text>
              <text class="group-count">{{group.articles.length}}ç¯‡</text>
            </view>
            <view class="group-articles">
              <view 
                class="article-item" 
                wx:for="{{group.articles}}" 
                wx:key="id"
                wx:for-item="article"
                bindtap="viewArticle" 
                data-article="{{article}}"
              >
                <image 
                  wx:if="{{article.cover}}" 
                  class="article-cover" 
                  src="{{article.cover}}" 
                  mode="aspectFill"
                  lazy-load="{{true}}"
                ></image>
                <view class="article-info">
                  <text class="article-title">{{article.title}}</text>
                  <view class="article-meta" wx:if="{{article.publishTime || article.readCount}}">
                    <text wx:if="{{article.publishTime}}" class="article-time">{{article.publishTime}}</text>
                    <text wx:if="{{article.readCount}}" class="article-read">{{article.readCount}}é˜…è¯»</text>
                  </view>
                </view>
                <text class="article-arrow">â€º</text>
              </view>
            </view>
          </view>
        </block>
      </view>

      <!-- ç©ºçŠ¶æ€ - æ— ç›¸å…³æ–‡ç«  -->
      <view class="empty-articles" wx:if="{{!articleGroups || articleGroups.length === 0}}">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— ç›¸å…³æ–‡ç« </text>
      </view>
    </scroll-view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty">
    <text class="empty-loading">æ¤ç‰©ä¿¡æ¯åŠ è½½ä¸­...</text>
  </view>
</view>