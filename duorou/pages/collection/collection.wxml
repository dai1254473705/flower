<!--pages/collection/collection.wxml-->
<view class="container {{currentTheme}}" style="font-size: {{fontSizeValue}}rpx;">
  <!-- 顶部工具条：数量 + 清空 -->
  <view class="toolbar" wx:if="{{collectionList.length > 0}}">
    <view class="count-badge">
      <text class="count-number">{{collectionList.length}}</text>
      <text class="count-text">个收藏</text>
    </view>
    <view class="clear-btn" bindtap="clearCollection">
      <text class="clear-icon">🗑️</text>
      <text class="clear-text">清空</text>
    </view>
  </view>

  <!-- 收藏列表 -->
  <scroll-view class="collection-list" scroll-y>
    <block wx:for="{{collectionList}}" wx:key="id">
      <view class="collection-item" bindtap="goToPlantDetail" data-plant="{{item}}">
        <view class="image-wrapper">
          <image class="plant-image" src="{{item.src}}" mode="aspectFill" lazy-load="true"></image>
          <view class="image-overlay"></view>
        </view>
        <view class="plant-info">
          <text class="plant-title">{{item.title}}</text>
          <view class="plant-meta">
            <text class="plant-category">{{item.category || '未分类'}}</text>
          </view>
        </view>
        <view class="remove-btn" catchtap="removeFromCollection" data-plant="{{item}}">
          <text class="remove-icon">✕</text>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- 空状态 -->
  <view wx:if="{{collectionList.length === 0}}" class="empty">
    <view class="empty-content">
      <text class="empty-icon">💚</text>
      <text class="empty-text">暂无收藏</text>
      <text class="empty-desc">快去首页发现喜欢的多肉植物吧</text>
    </view>
  </view>
</view>