<!--pages/index/index.wxml-->
<view class="container {{currentTheme}}" style="font-size: {{fontSizeValue}}rpx;">
  <!-- ÊêúÁ¥¢Ê†è -->
  <view class="search-section">
    <view class="search-bar">
      <view class="search-input-wrapper">
        <text class="search-icon">üîç</text>
        <input 
          class="search-input" 
          placeholder="ÊêúÁ¥¢Â§öËÇâÊ§çÁâ©ÂêçÁß∞" 
          value="{{searchValue}}"
          bindinput="onSearchInput"
          bindconfirm="onSearch"
        />
      </view>
      <view class="search-btn" bindtap="onSearch">
        <text class="search-btn-text">ÊêúÁ¥¢</text>
      </view>
    </view>
  </view>

  <!-- ÂàÜÁ±ª + ÂàóË°®Â∏ÉÂ±Ä -->
  <view class="category-layout">
    <scroll-view class="category-sidebar" scroll-y>
      <view 
        class="category-item {{activeCategory === item.name ? 'active' : ''}}" 
        wx:for="{{categories}}" 
        wx:key="name"
        data-category="{{item.name}}"
        bindtap="onSelectCategory"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-count-badge">{{item.count}}</text>
        <text class="category-name">{{item.name}}</text>
      </view>
    </scroll-view>

    <scroll-view class="plants-area" scroll-y>
      <view class="plants-grid">
        <!-- È™®Êû∂Â±è -->
        <block wx:if="{{showSkeleton}}" wx:for="{{skeletonCount}}" wx:key="index">
          <view class="plant-card skeleton-card">
            <view class="skeleton skeleton-image"></view>
            <view class="plant-info">
              <view class="skeleton skeleton-title"></view>
              <view class="skeleton skeleton-category"></view>
            </view>
          </view>
        </block>
        
        <!-- ÁúüÂÆûÊï∞ÊçÆ -->
        <block wx:if="{{!showSkeleton && plants.length > 0}}" wx:for="{{plants}}" wx:key="id">
          <view class="plant-card" bindtap="goToPlantList" data-plant="{{item}}">
            <view class="plant-image-wrapper">
              <image class="plant-image" src="{{item.src}}" mode="aspectFit" lazy-load="true"></image>
            </view>
            <view class="plant-info">
              <text class="plant-title">{{item.title}}</text>
              <view class="plant-category-wrapper">
                <text class="plant-category">{{item.category}}</text>
              </view>
            </view>
            <view class="collection-btn" catchtap="toggleCollection" data-plant="{{item}}">
              <text class="icon {{item.isCollected ? 'collected' : ''}}">{{item.isCollected ? '‚ô•' : '‚ô°'}}</text>
            </view>
          </view>
        </block>
      </view>
    </scroll-view>
  </view>

  <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
  <view wx:if="{{loading}}" class="loading">
    <text>Âä†ËΩΩ‰∏≠...</text>
  </view>

  <view wx:if="{{!loading && plants.length === 0}}" class="empty">
    <text>ÊöÇÊó†Êï∞ÊçÆ</text>
  </view>

  <view wx:if="{{showNoMore && plants.length > 0}}" class="no-more">
    <text>Ê≤°ÊúâÊõ¥Â§öÊï∞ÊçÆ‰∫Ü</text>
  </view>
</view>