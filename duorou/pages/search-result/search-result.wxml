<!--pages/search-result/search-result.wxml-->
<view class="container {{currentTheme}}" style="font-size: {{fontSizeValue}}rpx;">
  <!-- æœç´¢ç»“æœæ ‡é¢˜ -->
  <view class="search-header">
    <view class="header-content">
      <view class="keyword-badge">
        <text class="keyword-text">{{keyword}}</text>
      </view>
      <view class="result-count-badge">
        <text class="count-number">{{plants.length}}</text>
        <text class="count-text">ä¸ªç»“æœ</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢ç»“æœåˆ—è¡¨ -->
  <scroll-view class="search-results" scroll-y>
    <!-- éª¨æ¶å± -->
    <block wx:if="{{showSkeleton}}" wx:for="{{skeletonCount}}" wx:key="index">
      <view class="result-item skeleton-item">
        <view class="skeleton skeleton-image"></view>
        <view class="plant-info">
          <view class="skeleton skeleton-title"></view>
          <view class="skeleton skeleton-category"></view>
        </view>
      </view>
    </block>
    
    <!-- çœŸå®æ•°æ® -->
    <block wx:if="{{!showSkeleton && plants.length > 0}}" wx:for="{{plants}}" wx:key="id">
      <view class="result-item" bindtap="goToPlantDetail" data-plant="{{item}}">
        <view class="image-wrapper">
          <image class="plant-image" src="{{item.src}}" mode="aspectFill" lazy-load="true"></image>
        </view>
        <view class="plant-info">
          <text class="plant-title">{{item.title}}</text>
          <view class="plant-meta">
            <text class="plant-category">{{item.category || 'æœªåˆ†ç±»'}}</text>
          </view>
        </view>
        <view class="collection-btn" catchtap="toggleCollection" data-plant="{{item}}">
          <text class="collection-icon {{item.isCollected ? 'collected' : ''}}">{{item.isCollected ? 'â™¥' : 'â™¡'}}</text>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{!loading && !showSkeleton && plants.length === 0}}" class="empty">
    <view class="empty-content">
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³æ¤ç‰©</text>
      <text class="empty-desc">è¯·å°è¯•å…¶ä»–å…³é”®è¯æœç´¢</text>
    </view>
  </view>

  <!-- æ²¡æœ‰æ›´å¤š -->
  <view wx:if="{{!hasMore && !loading && !showSkeleton && plants.length > 0}}" class="no-more">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šç»“æœäº†</text>
  </view>
</view>